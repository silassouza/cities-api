package com.example.citiesapi.utils

import javax.persistence.AttributeConverter
import javax.persistence.Converter

import org.springframework.data.geo.Point

import com.fasterxml.jackson.databind.ObjectMapper

@Converter
class JsonConverter<T> implements AttributeConverter<T, String> {
	
	@Override
	def String convertToDatabaseColumn(T attribute) {
		ObjectMapper objectMapper = new ObjectMapper()
		objectMapper.writeValueAsString(attribute)
	}

	@Override
	def T convertToEntityAttribute(String data) {
		ObjectMapper objectMapper = new ObjectMapper()
		objectMapper.readValue(data, T)
	}
	
}
