package com.example.citiesapi.utils;

import java.awt.Color;

import javax.persistence.AttributeConverter;
import javax.persistence.Converter;

import org.springframework.data.geo.Point;

@Converter
class PointConverter implements AttributeConverter<Point, String> {

	final String SEPARATOR = ",";
	final String TRIM_START = "(";
	final String TRIM_END = ")";

	/**
	 * Convert Color object to a String with format red|green|blue|alpha
	 */
	@Override
	public String convertToDatabaseColumn(Color color) {
		StringBuilder sb = new StringBuilder();
		sb.append(color.getRed()).append(SEPARATOR).append(color.getGreen()).append(SEPARATOR).append(color.getBlue())
				.append(SEPARATOR).append(color.getAlpha());
		return sb.toString();
	}

	/**
	 * Convert a String with format red|green|blue|alpha to a Color object
	 */
	@Override
	public Color convertToEntityAttribute(String colorString) {
		String[] rgb = colorString.split(SEPARATOR);
		return new Color(Integer.parseInt(rgb[0]), Integer.parseInt(rgb[1]), Integer.parseInt(rgb[2]),
				Integer.parseInt(rgb[3]));
	}

}